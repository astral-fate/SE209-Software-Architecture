
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Software Architecture - Week 2: Layered Architecture</title>
<style>
    /* ==================== GENERAL STYLES ==================== */
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap');
    
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }
    
    body {
        font-family: 'Poppins', sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        padding: 20px;
        color: #333;
    }
    
    .container {
        max-width: 1200px;
        margin: 0 auto;
        background: white;
        border-radius: 20px;
        box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        overflow: hidden;
    }
    
    /* ==================== HEADER WITH PROGRESS ==================== */
    .header {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 30px;
        text-align: center;
        position: relative;
    }
    
    .header h1 {
        font-size: 2.5em;
        margin-bottom: 10px;
        text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
    }
    
    .header .subtitle {
        font-size: 1.1em;
        opacity: 0.9;
    }
    
    .progress-container {
        margin-top: 20px;
        background: rgba(255,255,255,0.2);
        border-radius: 10px;
        height: 30px;
        overflow: hidden;
    }
    
    .progress-bar {
        height: 100%;
        background: linear-gradient(90deg, #48c6ef 0%, #6f86d6 100%);
        width: 0%;
        transition: width 0.5s ease;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: bold;
        font-size: 0.9em;
    }
    
    /* ==================== GAMIFICATION STATS ==================== */
    .stats-bar {
        display: flex;
        justify-content: space-around;
        padding: 20px;
        background: #f8f9fa;
        border-bottom: 3px solid #e9ecef;
    }
    
    .stat-item {
        text-align: center;
        padding: 10px 20px;
        background: white;
        border-radius: 10px;
        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        min-width: 120px;
    }
    
    .stat-item .stat-icon {
        font-size: 2em;
        margin-bottom: 5px;
    }
    
    .stat-item .stat-label {
        font-size: 0.85em;
        color: #6c757d;
        font-weight: 600;
    }
    
    .stat-item .stat-value {
        font-size: 1.5em;
        font-weight: bold;
        color: #667eea;
    }
    
    /* ==================== NAVIGATION TABS ==================== */
    .nav-tabs {
        display: flex;
        overflow-x: auto;
        background: #f8f9fa;
        border-bottom: 3px solid #dee2e6;
        padding: 0 10px;
    }
    
    .nav-tabs::-webkit-scrollbar {
        height: 6px;
    }
    
    .nav-tabs::-webkit-scrollbar-thumb {
        background: #667eea;
        border-radius: 3px;
    }
    
    .tab-btn {
        padding: 15px 25px;
        border: none;
        background: none;
        color: #495057;
        font-weight: 600;
        cursor: pointer;
        border-bottom: 3px solid transparent;
        transition: all 0.3s ease;
        white-space: nowrap;
        position: relative;
    }
    
    .tab-btn:hover {
        background: rgba(102, 126, 234, 0.1);
        color: #667eea;
    }
    
    .tab-btn.active {
        color: #667eea;
        border-bottom-color: #667eea;
        background: white;
    }
    
    .tab-btn .badge {
        position: absolute;
        top: 5px;
        right: 5px;
        background: #28a745;
        color: white;
        border-radius: 50%;
        width: 20px;
        height: 20px;
        font-size: 0.7em;
        display: flex;
        align-items: center;
        justify-content: center;
    }
    
    /* ==================== CONTENT SECTIONS ==================== */
    .content-section {
        display: none;
        padding: 30px;
        animation: fadeInUp 0.5s ease;
    }
    
    .content-section.active {
        display: block;
    }
    
    @keyframes fadeInUp {
        from {
            opacity: 0;
            transform: translateY(20px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }
    
    h2 {
        color: #667eea;
        margin-bottom: 20px;
        font-size: 2em;
        border-bottom: 3px solid #667eea;
        padding-bottom: 10px;
    }
    
    h3 {
        color: #764ba2;
        margin-top: 25px;
        margin-bottom: 15px;
        font-size: 1.5em;
    }

    h4 {
        color: #667eea;
        margin-top: 20px;
        margin-bottom: 10px;
        font-size: 1.2em;
    }
    
    /* ==================== GLOSSARY ACCORDION ==================== */
    .glossary-accordion {
        margin: 20px 0;
    }
    
    .accordion-item {
        margin-bottom: 10px;
        border-radius: 10px;
        overflow: hidden;
        box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    
    .accordion-header {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 15px 20px;
        cursor: pointer;
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-weight: 600;
        transition: all 0.3s ease;
    }
    
    .accordion-header:hover {
        background: linear-gradient(135deg, #764ba2 0%, #667eea 100%);
    }
    
    .accordion-header .icon {
        transition: transform 0.3s ease;
    }
    
    .accordion-header.active .icon {
        transform: rotate(180deg);
    }
    
    .accordion-content {
        max-height: 0;
        overflow: hidden;
        transition: max-height 0.3s ease;
        background: white;
    }
    
    .accordion-content.active {
        max-height: 500px; /* Increased max-height for potentially longer content */
    }
    
    .accordion-content p, .accordion-content ul {
        padding: 20px;
        line-height: 1.6;
    }

    .accordion-content ul {
        list-style-position: inside;
    }
    
    /* ==================== INFO CARDS ==================== */
    .info-card {
        background: white;
        border-radius: 15px;
        padding: 25px;
        margin: 20px 0;
        box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        border-left: 5px solid #667eea;
    }
    
    .info-card.warning {
        border-left-color: #ffc107;
        background: #fff9e6;
    }
    
    .info-card.success {
        border-left-color: #28a745;
        background: #e8f5e9;
    }
    
    .info-card.danger {
        border-left-color: #dc3545;
        background: #ffebee;
    }
    
    .info-card.info {
        border-left-color: #17a2b8;
        background: #e3f2fd;
    }

    .info-card li {
        margin-left: 20px;
        margin-bottom: 5px;
    }
    
    /* ==================== LAYERED STACK VISUAL ==================== */
    .layered-stack {
        display: flex;
        flex-direction: column;
        gap: 10px;
        margin: 25px 0;
    }
    .stack-layer {
        border-radius: 15px;
        padding: 25px;
        box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        border: 3px solid;
    }
    .stack-layer.presentation {
        background: #e3f2fd;
        border-color: #17a2b8;
    }
    .stack-layer.business {
        background: #e8f5e9;
        border-color: #28a745;
    }
    .stack-layer.service {
        background: #fff9e6;
        border-color: #ffc107;
        border-style: dashed;
    }
    .stack-layer.persistence {
        background: #ffebee;
        border-color: #dc3545;
    }
    .stack-layer.database {
        background: #f3e5f5;
        border-color: #764ba2;
    }
    .stack-layer h3 {
        margin-top: 0;
        padding-bottom: 10px;
        border-bottom: 2px solid rgba(0,0,0,0.1);
    }
    .stack-layer.presentation h3 { color: #17a2b8; }
    .stack-layer.business h3 { color: #28a745; }
    .stack-layer.service h3 { color: #ffc107; }
    .stack-layer.persistence h3 { color: #dc3545; }
    .stack-layer.database h3 { color: #764ba2; }

    .stack-arrow {
        font-size: 2.5em;
        color: #667eea;
        text-align: center;
        font-weight: bold;
        margin: -10px 0;
    }
    
    /* ==================== COMPARISON GRID ==================== */
    .comparison-container {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 20px;
        margin: 25px 0;
    }
    
    .comparison-box {
        padding: 25px;
        border-radius: 15px;
        box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        transition: transform 0.3s ease;
    }
    
    .comparison-box:hover {
        transform: translateY(-5px);
    }

    .comparison-box p, .comparison-box li {
        color: white;
        opacity: 0.95;
    }

    .comparison-box h3 {
        color: white;
    }
    
    .comparison-box.blue {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
    }
    
    .comparison-box.green {
        background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
        color: white;
    }
    
    .comparison-box .icon {
        font-size: 3em;
        margin-bottom: 15px;
    }
    
    /* ==================== ANIMATED PROCESS FLOW (SDLC) ==================== */
    .process-flow {
        display: flex;
        justify-content: space-around;
        align-items: center;
        margin: 30px 0;
        flex-wrap: wrap;
        position: relative;
    }
    
    .flow-step {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 20px;
        border-radius: 15px; /* Changed to rounded rectangle */
        width: 160px; /* Adjusted width */
        height: 100px; /* Adjusted height */
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        text-align: center;
        font-weight: bold;
        box-shadow: 0 10px 25px rgba(102, 126, 234, 0.3);
        animation: pulse 2s infinite;
        position: relative;
        margin: 10px;
    }
    
    .flow-step .step-label {
        font-size: 0.95em;
    }
    
    @keyframes pulse {
        0%, 100% {
            transform: scale(1);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.3);
        }
        50% {
            transform: scale(1.05);
            box-shadow: 0 15px 35px rgba(102, 126, 234, 0.5);
        }
    }
    
    .flow-step:nth-child(2) { animation-delay: 0.2s; }
    .flow-step:nth-child(3) { animation-delay: 0.4s; }
    .flow-step:nth-child(4) { animation-delay: 0.6s; }
    .flow-step:nth-child(5) { animation-delay: 0.8s; }
    .flow-step:nth-child(6) { animation-delay: 1.0s; }
    .flow-step:nth-child(7) { animation-delay: 1.2s; }
    .flow-step:nth-child(8) { animation-delay: 1.4s; }

    
    .flow-arrow {
        font-size: 2.5em;
        color: #667eea;
        animation: arrowMove 1.5s infinite;
        margin: 0 10px;
    }
    
    @keyframes arrowMove {
        0%, 100% { transform: translateX(0); }
        50% { transform: translateX(10px); }
    }
    
    /* ==================== STYLE/PATTERN DIAGRAM ==================== */
    .style-pattern-diagram {
        background: #f8f9fa;
        border-radius: 15px;
        padding: 25px;
        margin: 25px 0;
        border: 2px dashed #667eea;
        text-align: center;
    }
    .style-box {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 20px;
        border-radius: 15px;
        box-shadow: 0 10px 25px rgba(102, 126, 234, 0.3);
    }
    .style-box h3 {
        color: white;
        border-bottom: 2px solid rgba(255,255,255,0.5);
        padding-bottom: 10px;
    }
    .patterns-container {
        display: flex;
        justify-content: space-around;
        gap: 20px;
        margin-top: 20px;
        flex-wrap: wrap;
    }
    .pattern-box {
        background: white;
        color: #333;
        padding: 15px;
        border-radius: 10px;
        box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        flex: 1;
        min-width: 250px;
    }
    .pattern-box h4 {
        color: #667eea;
    }
    .design-pattern-box {
        background: #e9ecef;
        color: #495057;
        padding: 10px;
        border-radius: 8px;
        margin-top: 10px;
        font-weight: 600;
    }

    
    /* ==================== REQUIREMENTS SPIRAL DIAGRAM ==================== */
    .spiral-container {
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 500px;
        position: relative;
        margin: 40px 0;
    }
    
    .spiral-step {
        position: absolute;
        background: white;
        border: 3px solid #667eea;
        border-radius: 15px;
        padding: 20px;
        box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        transition: all 0.3s ease;
        cursor: pointer;
    }
    
    .spiral-step:hover {
        transform: scale(1.1);
        z-index: 10;
        box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4);
    }
    
    .spiral-step h4 {
        color: #667eea;
        margin-bottom: 10px;
    }
    
    /* ==================== INTERACTIVE EXAMPLES ==================== */
    .example-container {
        background: #f8f9fa;
        border-radius: 15px;
        padding: 25px;
        margin: 25px 0;
        border: 2px dashed #667eea;
    }
    
    .example-title {
        color: #667eea;
        font-weight: bold;
        font-size: 1.2em;
        margin-bottom: 15px;
        display: flex;
        align-items: center;
        gap: 10px;
    }
    
    .requirement-item {
        background: white;
        padding: 15px;
        margin: 10px 0;
        border-radius: 10px;
        border-left: 4px solid #667eea;
        transition: all 0.3s ease;
    }
    
    .requirement-item:hover {
        transform: translateX(10px);
        box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    }
    
    /* ==================== METRICS TABLE ==================== */
    .metrics-table {
        width: 100%;
        border-collapse: collapse;
        margin: 25px 0;
        box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        border-radius: 10px;
        overflow: hidden;
    }
    
    .metrics-table thead {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
    }
    
    .metrics-table th,
    .metrics-table td {
        padding: 15px;
        text-align: left;
    }
    
    .metrics-table tbody tr {
        border-bottom: 1px solid #e9ecef;
        transition: background 0.3s ease;
    }
    
    .metrics-table tbody tr:hover {
        background: rgba(102, 126, 234, 0.1);
    }
    
    /* ==================== PROS/CONS LISTS ==================== */
    .pros-cons-container {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 20px;
        margin: 25px 0;
    }
    
    .pros-box, .cons-box {
        padding: 20px;
        border-radius: 15px;
        box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    }
    
    .pros-box {
        background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
        color: white;
    }
    
    .cons-box {
        background: linear-gradient(135deg, #eb3349 0%, #f45c43 100%);
        color: white;
    }
    
    .pros-box h3, .cons-box h3 {
        color: white;
        margin-bottom: 15px;
    }
    
    .pros-box ul, .cons-box ul {
        list-style: none;
        padding: 0;
    }
    
    .pros-box li, .cons-box li {
        padding: 8px 0;
        padding-left: 25px;
        position: relative;
    }
    
    .pros-box li::before {
        content: "‚úì";
        position: absolute;
        left: 0;
        font-weight: bold;
        font-size: 1.2em;
    }
    
    .cons-box li::before {
        content: "‚úó";
        position: absolute;
        left: 0;
        font-weight: bold;
        font-size: 1.2em;
    }
    
    /* ==================== QUIZ STYLES ==================== */
    .quiz-container {
        margin: 20px 0;
    }
    
    .question-card {
        background: white;
        border-radius: 15px;
        padding: 25px;
        margin: 20px 0;
        box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        border-left: 5px solid #667eea;
    }
    
    .question-text {
        font-size: 1.1em;
        font-weight: 600;
        margin-bottom: 20px;
        color: #333;
    }
    
    .options-grid {
        display: grid;
        gap: 10px;
    }
    
    .option-btn {
        padding: 15px 20px;
        border: 2px solid #e9ecef;
        background: white;
        border-radius: 10px;
        cursor: pointer;
        transition: all 0.3s ease;
        text-align: left;
        font-size: 1em;
    }
    
    .option-btn:hover {
        border-color: #667eea;
        background: rgba(102, 126, 234, 0.1);
        transform: translateX(5px);
    }
    
    .option-btn.selected {
        background: #667eea;
        color: white;
        border-color: #667eea;
    }
    
    .option-btn.correct {
        background: #28a745;
        color: white;
        border-color: #28a745;
    }
    
    .option-btn.incorrect {
        background: #dc3545;
        color: white;
        border-color: #dc3545;
    }
    
    .check-btn {
        margin-top: 15px;
        padding: 12px 30px;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        border: none;
        border-radius: 25px;
        cursor: pointer;
        font-weight: 600;
        transition: all 0.3s ease;
    }
    
    .check-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
    }
    
    .feedback {
        margin-top: 15px;
        padding: 15px;
        border-radius: 10px;
        font-weight: 600;
        animation: slideIn 0.3s ease;
    }
    
    @keyframes slideIn {
        from {
            opacity: 0;
            transform: translateY(-10px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }
    
    .feedback.correct {
        background: #d4edda;
        color: #155724;
        border: 2px solid #28a745;
    }
    
    .feedback.incorrect {
        background: #f8d7da;
        color: #721c24;
        border: 2px solid #dc3545;
    }
    
    /* ==================== TOOLTIPS ==================== */
    .tooltip {
        position: relative;
        display: inline-block;
        cursor: help;
        border-bottom: 2px dotted #667eea;
        color: #667eea;
        font-weight: 600;
    }
    
    .tooltip .tooltiptext {
        visibility: hidden;
        width: 300px;
        background-color: #555;
        color: #fff;
        text-align: center;
        border-radius: 6px;
        padding: 10px;
        position: absolute;
        z-index: 1;
        bottom: 125%;
        left: 50%;
        margin-left: -150px;
        opacity: 0;
        transition: opacity 0.3s;
        font-size: 0.9em;
        font-weight: normal;
    }
    
    .tooltip:hover .tooltiptext {
        visibility: visible;
        opacity: 1;
    }
    
    /* ==================== INTERACTIVE BUTTONS ==================== */
    .action-buttons {
        display: flex;
        gap: 15px;
        margin: 20px 0;
        flex-wrap: wrap;
    }
    
    .action-btn {
        padding: 12px 25px;
        border-radius: 25px;
        border: none;
        cursor: pointer;
        font-weight: 600;
        transition: all 0.3s ease;
    }
    
    .action-btn.primary {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
    }
    
    .action-btn.secondary {
        background: white;
        color: #667eea;
        border: 2px solid #667eea;
    }
    
    .action-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(0,0,0,0.2);
    }
    
    /* ==================== RESPONSIVE DESIGN ==================== */
    @media (max-width: 768px) {
        .header h1 {
            font-size: 1.8em;
        }
        
        .stats-bar {
            flex-wrap: wrap;
            gap: 10px;
        }

        .stat-item {
            min-width: 100px;
        }
        
        .comparison-container,
        .pros-cons-container {
            grid-template-columns: 1fr;
        }
        
        .process-flow {
            flex-direction: column;
        }
        
        .flow-arrow {
            transform: rotate(90deg);
            margin: 10px 0;
            animation: arrowMoveY 1.5s infinite;
        }

        @keyframes arrowMoveY {
            0%, 100% { transform: rotate(90deg) translateY(0); }
            50% { transform: rotate(90deg) translateY(10px); }
        }
        
        .spiral-container {
            min-height: auto;
            flex-direction: column;
            position: static;
        }
        .spiral-step {
            position: static;
            margin-bottom: 15px;
        }
    }
    
    /* ==================== LOADING ANIMATION ==================== */
    .loading {
        display: inline-block;
        width: 20px;
        height: 20px;
        border: 3px solid rgba(102, 126, 234, 0.3);
        border-radius: 50%;
        border-top-color: #667eea;
        animation: spin 1s ease-in-out infinite;
    }
    
    @keyframes spin {
        to { transform: rotate(360deg); }
    }
</style>
</head>
<body>
<div class="container">
    <!-- ==================== HEADER ==================== -->
    <div class="header">
        <h1>üèõÔ∏è Week 2: Layered Architecture (N-Tier)</h1>
        <p class="subtitle">A Deep Dive into the N-Tier Style</p>
        <div class="progress-container">
            <div class="progress-bar" id="progressBar">0% Complete</div>
        </div>
    </div>
    
    <!-- ==================== GAMIFICATION STATS ==================== -->
    <div class="stats-bar">
        <div class="stat-item">
            <div class="stat-icon">üèÜ</div>
            <div class="stat-label">Points</div>
            <div class="stat-value" id="points">0</div>
        </div>
        <div class="stat-item">
            <div class="stat-icon">‚úÖ</div>
            <div class="stat-label">Completed</div>
            <div class="stat-value" id="completed">0/6</div>
        </div>
        <div class="stat-item">
            <div class="stat-icon">üéØ</div>
            <div class="stat-label">Accuracy</div>
            <div class="stat-value" id="accuracy">0%</div>
        </div>
        <div class="stat-item">
            <div class="stat-icon">‚≠ê</div>
            <div class="stat-label">Streak</div>
            <div class="stat-value" id="streak">0</div>
        </div>
    </div>
    
    <!-- ==================== NAVIGATION TABS ==================== -->
    <div class="nav-tabs">
        <button class="tab-btn active" data-tab="intro-layered">üìö Intro to Layered</button>
        <button class="tab-btn" data-tab="four-layers">üèõÔ∏è The Layers</button>
        <button class="tab-btn" data-tab="isolation">üõ°Ô∏è Layers of Isolation</button>
        <button class="tab-btn" data-tab="when-to-use">üëç When to Use</button>
        <button class="tab-btn" data-tab="anti-patterns">üöß Anti-Patterns</button>
        <button class="tab-btn" data-tab="glossary">üìñ Glossary</button>
        <button class="tab-btn" data-tab="quiz-fill">üìù Fill in the Blank</button>
        <button class="tab-btn" data-tab="quiz-tf">‚ùì True/False</button>
        <button class="tab-btn" data-tab="quiz-mc">üé≤ Multiple Choice</button>
    </div>
    
    <!-- ==================== SECTION 1: Intro to Layered ==================== -->
    <div class="content-section active" data-section="intro-layered">
        <h2>üìö Intro to Layered Architecture (N-Tier)</h2>
        
        <div class="info-card">
            <h3>The Context</h3>
            <p>Complex systems need to develop portions of the system independently. Developers need a clear and well-documented <strong>separation of concerns</strong>, so modules can be independently developed and maintained.</p>
        </div>

        <div class="info-card warning">
            <h3>The Problem</h3>
            <p>The software needs to be segmented and evolved separately with little interaction between parts, supporting <strong>portability</strong>, <strong>modifiability</strong>, and <strong>reuse</strong>.</p>
        </div>

        <div class="info-card success">
            <h3>The Solution</h3>
            <p>To achieve separation of concerns, the software is divided into units called <strong>layers</strong>. Each layer is a grouping of modules that offers a set of services.</p>
        </div>

        <div class="info-card info">
            <h3>Key Characteristics</h3>
            <ul>
                <li><strong>Monolithic:</strong> The application is typically a single deployment unit.</li>
                <li><strong>Technically Partitioned:</strong> Components are organized into horizontal layers, each performing a specific role (e.g., presentation, business logic).</li>
            </ul>
        </div>
        
        <div class="action-buttons">
            <button class="action-btn primary" onclick="markSectionComplete('intro-layered')">‚úì Mark as Complete</button>
            <button class="action-btn secondary" onclick="navigateToTab('four-layers')">Next: The Layers ‚Üí</button>
        </div>
    </div>
    
    <!-- ==================== SECTION 2: The Layers ==================== -->
    <div class="content-section" data-section="four-layers">
        <h2>üèõÔ∏è The Standard Layers</h2>
        <p>Most layered architectures consist of four standard layers, though smaller apps might have only three (combining Business and Persistence). Each layer is a grouping of modules that offers a set of services.</p>

        <div class="layered-stack">
            <div class="stack-layer presentation">
                <h3>1. Presentation Layer</h3>
                <p>The system's top layer, in charge of managing user interactions.</p>
                <ul>
                    <li>Deals with data presentation and formatting it for display.</li>
                    <li>Handles user input validation.</li>
                    <li>Manages the user interface (e.g., desktop application, mobile application, or web interface).</li>
                    <li>To retrieve and store data, this layer interfaces with the Application (Business) layer.</li>
                </ul>
            </div>

            <div class="stack-arrow">‚¨á</div>

            <div class="stack-layer business">
                <h3>2. Business Layer</h3>
                <p>This layer is responsible for executing specific business rules associated with the request.</p>
                 <ul>
                    <li>Essentially determines the behavior of the entire application.</li>
                    <li>Tells the application what to do next after one action finishes.</li>
                    <li>Operations occur here, such as calculating values or aggregating data.</li>
                </ul>
            </div>

            <div class="stack-arrow">‚¨á</div>

            <div class="stack-layer persistence">
                <h3>3. Persistence Layer (DAO)</h3>
                <p>Also called the <strong>Data Access Layer (DAO)</strong>, this acts as a protective layer.</p>
                 <ul>
                    <li>Contains the code that's necessary to access the database layer.</li>
                    <li>Holds the set of codes that allow you to manipulate various aspects of the database.</li>
                    <li>Operations occur here, such as managing connection details, CRUD operations, and SQL statements.</li>
                </ul>
            </div>

            <div class="stack-arrow">‚¨á</div>

            <div class="stack-layer database">
                <h3>4. Database Layer</h3>
                <p>The database layer is where the system stores all the data. It's the lowest tier in the software architecture.</p>
                 <ul>
                    <li>This layer has not only data but indexes and tables as well.</li>
                    <li>Operations occur here, such as search, insert, update, and delete.</li>
                </ul>
            </div>
        </div>


        <h3>The (Optional) Service Layer</h3>
        <div class="info-card info stack-layer service">
            <h3 style="margin-top: 0;">What about common services?</h3>
            <p>Creating a <strong>Service Layer</strong> is required in cases where there is common service functionality (e.g., data and string utility classes or auditing and logging classes).</p>
            <ul>
                <li>This layer would likely reside <strong>below the Business Layer</strong>.</li>
                <li>This architecturally <strong>restricts access to the shared services</strong> to the Business Layer (and not the Presentation Layer).</li>
                <li>Without a separate layer, there is nothing that architecturally restricts the Presentation Layer from accessing these common services, making it difficult to govern this access restriction.</li>
            </ul>
        </div>
        
        <div class="action-buttons">
            <button class="action-btn primary" onclick="markSectionComplete('four-layers')">‚úì Mark as Complete</button>
            <button class="action-btn secondary" onclick="navigateToTab('isolation')">Next: Layers of Isolation ‚Üí</button>
        </div>
    </div>
    
    <!-- ==================== SECTION 3: Layers of Isolation ==================== -->
    <div class="content-section" data-section="isolation">
        <h2>üõ°Ô∏è Key Concept: Layers of Isolation</h2>
        
        <div class="info-card">
            <h3>What is Isolation?</h3>
            <p>The <strong>Layers of Isolation</strong> concept means that changes made in one layer of the architecture generally <strong>don't impact or affect components in other layers</strong>.</p>
            <p>This isolates change to the components within that specific layer.</p>
        </div>

        <div class="comparison-container">
            <div class="comparison-box blue">
                <div class="icon">üîí</div>
                <h3>Closed Layer</h3>
                <p>A <strong>Closed</strong> layer means that a request must move from a layer to the one <strong>directly below it</strong>. It cannot skip layers.</p>
                <p>For example, a request from the Presentation Layer *must* go through the Business Layer, then the Persistence Layer, before hitting the Database Layer.</p>
            </div>
            <div class="comparison-box green">
                <div class="icon">üîì</div>
                <h3>Open Layer</h3>
                <p>An <strong>Open</strong> layer means that requests are allowed to <strong>bypass this layer</strong> and go directly to the layer below it.</p>
                <p>For example, a Service Layer might be marked as "Open," allowing the Business Layer to either use it *or* bypass it and go directly to the Persistence Layer.</p>
            </div>
        </div>

        <div class="info-card success">
            <h3>Why is Isolation Important?</h3>
            <p><strong>Use Case:</strong> Imagine a large refactoring effort to change the Presentation Layer from Angular.js to React.js.</p>
            <p>Because of isolation, as long as the "contract" (the data model) between the Presentation and Business layers remains the same, the <strong>Business Layer is not affected by the refactoring</strong>. The same is true for the database‚Äîyou could swap a relational database for a NoSQL database, and only the Persistence Layer would need to change.</p>
        </div>

        <div class="example-container">
            <div class="example-title">
                <span>üí°</span>
                <span>Example Flow: Orders Placed by the Customer</span>
            </div>
            <div class="requirement-item">
                <strong>Step 1:</strong> The <strong>Customer Screen</strong> (Presentation) receives a request for customer info and forwards it to the <strong>Customer Delegate</strong> (Presentation).
            </div>
             <div class="requirement-item">
                <strong>Step 2:</strong> The <strong>Customer Delegate</strong> (Presentation) invokes the <strong>Customer Object</strong> (Business) module.
            </div>
             <div class="requirement-item">
                <strong>Step 3:</strong> The <strong>Customer Object</strong> (Business) invokes both the <strong>Customer DAO</strong> (Persistence) to get customer data and the <strong>Order DAO</strong> (Persistence) to get order info.
            </div>
             <div class="requirement-item">
                <strong>Step 4:</strong> The <strong>DAO modules</strong> (Persistence) execute SQL statements to retrieve data from the <strong>Database Layer</strong> and pass it back up to the Customer Object.
            </div>
        </div>

        <div class="action-buttons">
            <button class="action-btn primary" onclick="markSectionComplete('isolation')">‚úì Mark as Complete</button>
            <button class="action-btn secondary" onclick="navigateToTab('when-to-use')">Next: When to Use ‚Üí</button>
        </div>
    </div>
    
    <!-- ==================== SECTION 4: When to Use ==================== -->
    <div class="content-section" data-section="when-to-use">
        <h2>üëç When to Use Layered Architecture</h2>
        
        <div class="info-card success">
            <h3>Good For...</h3>
            <ul>
                <li>Layered Architecture is a well-understood and general-purpose style, making it a <strong>good starting point for most applications</strong>.</li>
                <li>It's a good choice if the project has significant <strong>budget or time constraints</strong>.</li>
                <li>It's ideal when a majority of your changes are isolated to <strong>specific technical layers</strong> (e.g., frequent UI changes).</li>
                <li>It's a perfect fit if your <strong>team structure is also technically partitioned</strong> (e.g., UI teams, backend teams, DBA teams).</li>
            </ul>
        </div>

        <h3>Architecture Analysis</h3>
        <p>Here is a general analysis of the Layered Architecture style based on common metrics.</p>
        
        <table class="metrics-table">
            <thead>
                <tr>
                    <th>Characteristic</th>
                    <th>Star Rating</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><strong>Partitioning Type</strong></td>
                    <td>Technical</td>
                </tr>
                <tr>
                    <td><strong>Overall Cost</strong></td>
                    <td>üí≤ (Low)</td>
                </tr>
                <tr>
                    <td><strong>Agility</strong></td>
                    <td>‚≠ê (Low)</td>
                </tr>
                <tr>
                    <td><strong>Simplicity</strong></td>
                    <td>‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê (Very High)</td>
                </tr>
                <tr>
                    <td><strong>Scalability</strong></td>
                    <td>‚≠ê (Low)</td>
                </tr>
                <tr>
                    <td><strong>Fault Tolerance</strong></td>
                    <td>‚≠ê (Low)</td>
                </tr>
                <tr>
                    <td><strong>Performance</strong></td>
                    <td>‚≠ê‚≠ê‚≠ê (Moderate)</td>
                </tr>
                <tr>
                    <td><strong>Extensibility</strong></td>
                    <td>‚≠ê (Low)</td>
                </tr>
            </tbody>
        </table>
        
        <div class="action-buttons">
            <button class="action-btn primary" onclick="markSectionComplete('when-to-use')">‚úì Mark as Complete</button>
            <button class="action-btn secondary" onclick="navigateToTab('anti-patterns')">Next: Anti-Patterns ‚Üí</button>
        </div>
    </div>
    
    <!-- ==================== SECTION 5: Anti-Patterns ==================== -->
    <div class="content-section" data-section="anti-patterns">
        <h2>üöß Anti-Patterns: Architecture Sinkhole</h2>
        
        <div class="info-card danger">
            <h3>The "Architecture Sinkhole" Anti-Pattern</h3>
            <p>This anti-pattern describes the case where requests flow through multiple layers of the architecture as <strong>simple pass-through processing</strong> with <strong>little or no logic</strong> performed within each layer.</p>
            <p>For example, the Presentation Layer calls the Business Layer, which does nothing but call the Persistence Layer, which does nothing but call the Database.</p>
            
            <h4>Is it a problem?</h4>
            <p>The key is to analyze the <strong>percentage</strong> of requests that fall into this category. The <strong>80-20 rule</strong> is a good practice: if 80% of your requests are doing real work in each layer, and 20% are simple pass-throughs, that's usually fine.</p>
            <p>However, if 80% of your requests are simple pass-throughs, you may have a problem. The "solution" is to create more <strong>Open Layers</strong> to bypass the unnecessary steps. But be careful: while this is faster, it makes it much harder to control change due to the lack of layer isolation.</p>
        </div>
        
        <div class="action-buttons">
            <button class="action-btn primary" onclick="markSectionComplete('anti-patterns')">‚úì Mark as Complete</button>
            <button class="action-btn secondary" onclick="navigateToTab('glossary')">Next: Glossary ‚Üí</button>
        </div>
    </div>

    <!-- ==================== SECTION 6: GLOSSARY ==================== -->
    <div class="content-section" data-section="glossary">
        <h2>üìñ Week 2 Glossary</h2>
        <p>Click on any term to expand its definition and learn more!</p>
        
        <div class="glossary-accordion">
            <div class="accordion-item">
                <div class="accordion-header">
                    <span>Layered Architecture (N-Tier)</span>
                    <span class="icon">‚ñº</span>
                </div>
                <div class="accordion-content">
                    <p>A monolithic, technically partitioned style where components are organized into horizontal layers, each performing a specific role (e.g., presentation, business). (Page 3)</p>
                </div>
            </div>
            
            <div class="accordion-item">
                <div class="accordion-header">
                    <span>Separation of Concerns</span>
                    <span class="icon">‚ñº</span>
                </div>
                <div class="accordion-content">
                    <p>The principle of separating a system into distinct modules or layers, so each part can be developed and maintained independently. (Page 2)</p>
                </div>
            </div>

            <div class="accordion-item">
                <div class="accordion-header">
                    <span>Presentation Layer</span>
                    <span class="icon">‚ñº</span>
                </div>
                <div class="accordion-content">
                    <p>The top layer, responsible for managing user interactions, data presentation, and the UI. (Page 5)</p>
                </div>
            </div>

            <div class="accordion-item">
                <div class="accordion-header">
                    <span>Business Layer</span>
                    <span class="icon">‚ñº</span>
                </div>
                <div class="accordion-content">
                    <p>The layer responsible for executing specific business rules and logic. (Page 6)</p>
                </div>
            </div>

            <div class="accordion-item">
                <div class="accordion-header">
                    <span>Persistence Layer (DAO)</span>
                    <span class="icon">‚ñº</span>
                </div>
                <div class="accordion-content">
                    <p>Also known as the Data Access Object (DAO) layer. It contains the code necessary to access the database (e.g., SQL, CRUD operations). (Page 7)</p>
                </div>
            </div>

            <div class="accordion-item">
                <div class="accordion-header">
                    <span>Service Layer</span>
                    <span class="icon">‚ñº</span>
                </div>
                <div class="accordion-content">
                    <p>An optional layer, usually below the Business Layer, that holds common service functionality like logging, auditing, or utility classes. (Page 9)</p>
                </div>
            </div>

            <div class="accordion-item">
                <div class="accordion-header">
                    <span>Layers of Isolation</span>
                    <span class="icon">‚ñº</span>
                </div>
                <div class="accordion-content">
                    <p>The key concept that changes made in one layer should not impact or affect components in other layers. (Page 10)</p>
                </div>
            </div>

            <div class="accordion-item">
                <div class="accordion-header">
                    <span>Closed Layer</span>
                    <span class="icon">‚ñº</span>
                </div>
                <div class="accordion-content">
                    <p>A layer where requests *must* pass through it to get to the layer directly below it. Skipping is not allowed. (Page 11)</p>
                </div>
            </div>

            <div class="accordion-item">
                <div class="accordion-header">
                    <span>Open Layer</span>
                    <span class="icon">‚ñº</span>
                </div>
                <div class="accordion-content">
                    <p>A layer that requests are allowed to *bypass* to go directly to the layer below it. (Page 12)</p>
                </div>
            </div>

            <div class="accordion-item">
                <div class="accordion-header">
                    <span>Architecture Sinkhole (Anti-Pattern)</span>
                    <span class="icon">‚ñº</span>
                </div>
                <div class="accordion-content">
                    <p>An anti-pattern where requests flow through multiple layers as simple pass-through processing, with little or no logic performed within each layer. (Page 17)</p>
                </div>
            </div>
        </div>
        
        <div class="action-buttons">
            <button class="action-btn primary" onclick="markSectionComplete('glossary')">‚úì Mark as Complete</button>
            <button class="action-btn secondary" onclick="navigateToTab('quiz-fill')">Ready for Quiz? ‚Üí</button>
        </div>
    </div>
    
    <!-- ==================== QUIZ SECTION: FILL IN THE BLANK ==================== -->
    <div class="content-section" data-section="quiz-fill">
        <h2>üìù Fill in the Blank Quiz</h2>
        <p>Test your knowledge by selecting the correct word to fill in each blank!</p>
        
        <div class="quiz-container" id="fillQuizContainer"></div>
        
        <div class="action-buttons" style="margin-top: 30px;">
            <button class="action-btn primary" onclick="checkAllFillAnswers()">Check All Answers</button>
            <button class="action-btn secondary" onclick="navigateToTab('quiz-tf')">Next: True/False Quiz ‚Üí</button>
        </div>
    </div>
    
    <!-- ==================== QUIZ SECTION: TRUE/FALSE ==================== -->
    <div class="content-section" data-section="quiz-tf">
        <h2>‚ùì True/False Quiz</h2>
        <p>Determine whether each statement is true or false!</p>
        
        <div class="quiz-container" id="tfQuizContainer"></div>
        
        <div class="action-buttons" style="margin-top: 30px;">
            <button class="action-btn primary" onclick="checkAllTFAnswers()">Check All Answers</button>
            <button class="action-btn secondary" onclick="navigateToTab('quiz-mc')">Next: Multiple Choice Quiz ‚Üí</button>
        </div>
    </div>
    
    <!-- ==================== QUIZ SECTION: MULTIPLE CHOICE ==================== -->
    <div class="content-section" data-section="quiz-mc">
        <h2>üé≤ Multiple Choice Quiz</h2>
        <p>Choose the best answer for each question!</p>
        
        <div class="quiz-container" id="mcQuizContainer"></div>
        
        <div class="action-buttons" style="margin-top: 30px;">
            <button class="action-btn primary" onclick="checkAllMCAnswers()">Check All Answers</button>
            <button class="action-btn secondary" onclick="showFinalResults()">View Final Results üèÜ</button>
        </div>
    </div>
</div>

<script>
// ==================== GAMIFICATION DATA ====================
let gameData = {
    points: 0,
    completedSections: new Set(),
    totalSections: 6, // 5 content sections + 1 glossary
    correctAnswers: 0,
    totalAnswers: 0,
    streak: 0,
    sectionCompletion: {}
};

// ==================== QUIZ DATA (All questions based on Lec2_SD.pdf) ====================
const fillInTheBlankQuiz = [
    {
        question: "Layered architecture is a _______ and Technically Partitioned style.",
        options: ["Distributed", "Microservice", "Monolithic", "Domain"],
        answer: "Monolithic"
    },
    {
        question: "The _______ Layer is in charge of managing user interactions and data presentation.",
        options: ["Business", "Persistence", "Presentation", "Service"],
        answer: "Presentation"
    },
    {
        question: "The _______ Layer, also called the Data Access Layer (DAO), acts as a protective layer for the database.",
        options: ["Persistence", "Business", "Presentation", "Service"],
        answer: "Persistence"
    },
    {
        question: "A _______ Layer means that a request must move to the layer directly below it, without skipping.",
        options: ["Service", "Open", "Closed", "Business"],
        answer: "Closed"
    },
    {
        question: "An _______ Layer means requests are allowed to bypass this layer and go directly to the layer below it.",
        options: ["Open", "Closed", "Isolated", "Persistence"],
        answer: "Open"
    },
    {
        question: "The _______ anti-pattern describes when requests flow through layers with little or no logic.",
        options: ["Layered Bypass", "Open Door", "Architecture Sinkhole", "Monolithic Mess"],
        answer: "Architecture Sinkhole"
    },
    {
        question: "The _______ Layer is responsible for executing specific business rules.",
        options: ["Presentation", "Database", "Persistence", "Business"],
        answer: "Business"
    }
];

const trueFalseQuiz = [
    {
        question: "Layered architecture is a 'Distributed' architecture style.",
        answer: false // It's Monolithic
    },
    {
        question: "In a layered architecture, components are organized into horizontal layers.",
        answer: true
    },
    {
        question: "The 'Layers of Isolation' concept means changes in one layer will likely affect all other layers.",
        answer: false // It means they *don't* affect other layers
    },
    {
        question: "In a 'Closed' layer design, the Presentation Layer is allowed to directly access the Persistence Layer.",
        answer: false // It must go through the Business Layer
    },
    {
        question: "A 'Service Layer' is often added to hold common functionality like logging or auditing.",
        answer: true
    },
    {
        question: "The 'Architecture Sinkhole' is a good pattern to follow for optimal performance.",
        answer: false // It's an anti-pattern
    },
    {
        question: "Layered architecture is a good choice if your team is 'technically partitioned'.",
        answer: true
    },
    {
        question: "You can have a 3-layer architecture by combining the Business and Persistence layers.",
        answer: true
    }
];

const multipleChoiceQuiz = [
    {
        question: "Which layer is responsible for executing business rules and determining application behavior?",
        options: [
            "Presentation Layer",
            "Business Layer",
            "Persistence Layer",
            "Database Layer"
        ],
        answer: "Business Layer"
    },
    {
        question: "What is the 'Layers of Isolation' key concept?",
        options: [
            "Changes in one layer generally don't impact other layers.",
            "All layers must be isolated in separate deployment units.",
            "The database must be isolated from all logic.",
            "The presentation layer cannot be changed."
        ],
        answer: "Changes in one layer generally don't impact other layers."
    },
    {
        question: "What is an 'Open Layer'?",
        options: [
            "A layer that is open for modification by any developer.",
            "A layer that is optional and can be removed.",
            "A layer that requests are allowed to bypass to talk to the layer below it.",
            "A layer that is open to the public internet."
        ],
        answer: "A layer that requests are allowed to bypass to talk to the layer below it."
    },
    {
        question: "What is the 'Architecture Sinkhole' anti-pattern?",
        options: [
            "When the database layer becomes too slow.",
            "When the UI is too complex.",
            "When requests pass through multiple layers with little or no logic being performed.",
            "When too many layers are marked as 'Open'."
        ],
        answer: "When requests pass through multiple layers with little or no logic being performed."
    },
    {
        question: "Layered Architecture is a good fit for which scenario?",
        options: [
            "A project with significant budget or time constraints.",
            "A system that needs extremely high scalability and fault tolerance.",
            "A project where all teams are cross-functional.",
            "An application that is 'domain partitioned'."
        ],
        answer: "A project with significant budget or time constraints."
    },
    {
        question: "Which layer contains the code necessary to access the database, including SQL statements and CRUD operations?",
        options: [
            "Business Layer",
            "Service Layer",
            "Persistence Layer",
            "Presentation Layer"
        ],
        answer: "Persistence Layer"
    },
    {
        question: "Which of these is NOT one of the four standard layers?",
        options: [
            "Presentation Layer",
            "Business Layer",
            "Service Layer",
            "Database Layer"
        ],
        answer: "Service Layer" // It's mentioned as an optional, additional layer
    }
];

// ==================== NAVIGATION FUNCTIONS ====================
function navigateToTab(tabName) {
    const tabs = document.querySelectorAll('.tab-btn');
    const sections = document.querySelectorAll('.content-section');
    
    tabs.forEach(tab => {
        if (tab.dataset.tab === tabName) {
            tab.classList.add('active');
        } else {
            tab.classList.remove('active');
        }
    });
    
    sections.forEach(section => {
        if (section.dataset.section === tabName) {
            section.classList.add('active');
        } else {
            section.classList.remove('active');
        }
    });
    
    window.scrollTo({ top: 0, behavior: 'smooth' });
}

// ==================== SECTION COMPLETION ====================
function markSectionComplete(sectionName) {
    // Only mark content sections, not quizzes
    const contentSections = ['intro-layered', 'four-layers', 'isolation', 'when-to-use', 'anti-patterns', 'glossary'];
    if (!contentSections.includes(sectionName)) {
        return;
    }

    if (!gameData.completedSections.has(sectionName)) {
        gameData.completedSections.add(sectionName);
        gameData.points += 10;
        gameData.sectionCompletion[sectionName] = true;
        
        // Add badge to tab
        const tab = document.querySelector(`[data-tab="${sectionName}"]`);
        if (tab && !tab.querySelector('.badge')) {
            const badge = document.createElement('span');
            badge.className = 'badge';
            badge.textContent = '‚úì';
            tab.appendChild(badge);
        }
        
        updateGameStats();
        showCompletionAnimation();
    }
}

function updateGameStats() {
    document.getElementById('points').textContent = gameData.points;
    document.getElementById('completed').textContent = `${gameData.completedSections.size}/${gameData.totalSections}`;
    
    const accuracy = gameData.totalAnswers > 0 
        ? Math.round((gameData.correctAnswers / gameData.totalAnswers) * 100) 
        : 0;
    document.getElementById('accuracy').textContent = `${accuracy}%`;
    document.getElementById('streak').textContent = gameData.streak;
    
    const progress = (gameData.completedSections.size / gameData.totalSections) * 100;
    const progressBar = document.getElementById('progressBar');
    progressBar.style.width = `${progress}%`;
    progressBar.textContent = `${Math.round(progress)}% Complete`;
}

function showCompletionAnimation() {
    // Create celebration animation
    const celebration = document.createElement('div');
    celebration.innerHTML = 'üéâ';
    celebration.style.cssText = `
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        font-size: 5em;
        z-index: 10000;
        animation: celebrate 1s ease-out forwards;
    `;
    
    const style = document.createElement('style');
    style.textContent = `
        @keyframes celebrate {
            0% { transform: translate(-50%, -50%) scale(0); opacity: 1; }
            50% { transform: translate(-50%, -50%) scale(1.2); }
            100% { transform: translate(-50%, -50%) scale(1) translateY(-100px); opacity: 0; }
        }
    `;
    
    document.head.appendChild(style);
    document.body.appendChild(celebration);
    
    setTimeout(() => {
        celebration.remove();
        style.remove();
    }, 1000);
}

// ==================== QUIZ FUNCTIONS ====================
function loadFillInTheBlankQuiz() {
    const container = document.getElementById('fillQuizContainer');
    container.innerHTML = '';
    
    fillInTheBlankQuiz.forEach((q, index) => {
        const questionCard = document.createElement('div');
        questionCard.className = 'question-card';
        questionCard.dataset.index = index;
        
        const questionText = q.question.replace('_______', '<span style="color: #dc3545; font-weight: bold;">_______</span>');
        
        questionCard.innerHTML = `
            <div class="question-text">${index + 1}. ${questionText}</div>
            <div class="options-grid">
                ${q.options.map(opt => `
                    <button class="option-btn" onclick="selectFillOption(${index}, '${opt}', this)">${opt}</button>
                `).join('')}
            </div>
            <div class="feedback-container"></div>
        `;
        
        container.appendChild(questionCard);
    });
}

function selectFillOption(questionIndex, selectedAnswer, button) {
    const card = button.closest('.question-card');
    card.querySelectorAll('.option-btn').forEach(btn => {
        btn.classList.remove('selected');
    });
    button.classList.add('selected');
    card.dataset.selected = selectedAnswer;
    
    // Clear previous feedback
    const feedbackContainer = card.querySelector('.feedback-container');
    feedbackContainer.innerHTML = '';
}

function checkAllFillAnswers() {
    let correct = 0;
    fillInTheBlankQuiz.forEach((q, index) => {
        const card = document.querySelector(`#fillQuizContainer .question-card[data-index="${index}"]`);
        const selected = card.dataset.selected;
        const feedbackContainer = card.querySelector('.feedback-container');
        
        if (!selected) {
            feedbackContainer.innerHTML = '<div class="feedback incorrect">Please select an answer!</div>';
            return;
        }
        
        gameData.totalAnswers++;
        
        if (selected === q.answer) {
            correct++;
            gameData.correctAnswers++;
            gameData.streak++;
            gameData.points += 5;
            feedbackContainer.innerHTML = '<div class="feedback correct">‚úì Correct! Well done!</div>';
            card.querySelectorAll('.option-btn').forEach(btn => {
                if (btn.textContent === q.answer) {
                    btn.classList.add('correct');
                }
            });
        } else {
            gameData.streak = 0;
            feedbackContainer.innerHTML = `<div class="feedback incorrect">‚úó Incorrect. The correct answer is: <strong>${q.answer}</strong></div>`;
            card.querySelectorAll('.option-btn').forEach(btn => {
                if (btn.classList.contains('selected')) {
                    btn.classList.add('incorrect');
                }
                if (btn.textContent === q.answer) {
                    btn.classList.add('correct');
                }
            });
        }
    });
    
    updateGameStats();
}

function loadTrueFalseQuiz() {
    const container = document.getElementById('tfQuizContainer');
    container.innerHTML = '';
    
    trueFalseQuiz.forEach((q, index) => {
        const questionCard = document.createElement('div');
        questionCard.className = 'question-card';
        questionCard.dataset.index = index;
        
        questionCard.innerHTML = `
            <div class="question-text">${index + 1}. ${q.question}</div>
            <div class="options-grid">
                <button class="option-btn" onclick="selectTFOption(${index}, true, this)">True</button>
                <button class="option-btn" onclick="selectTFOption(${index}, false, this)">False</button>
            </div>
            <div class="feedback-container"></div>
        `;
        
        container.appendChild(questionCard);
    });
}

function selectTFOption(questionIndex, selectedAnswer, button) {
    const card = button.closest('.question-card');
    card.querySelectorAll('.option-btn').forEach(btn => {
        btn.classList.remove('selected');
    });
    button.classList.add('selected');
    card.dataset.selected = selectedAnswer;
    
    // Clear previous feedback
    const feedbackContainer = card.querySelector('.feedback-container');
    feedbackContainer.innerHTML = '';
}

function checkAllTFAnswers() {
    let correct = 0;
    trueFalseQuiz.forEach((q, index) => {
        const card = document.querySelector(`#tfQuizContainer .question-card[data-index="${index}"]`);
        const selected = card.dataset.selected;
        const feedbackContainer = card.querySelector('.feedback-container');
        
        if (selected === undefined) {
            feedbackContainer.innerHTML = '<div class="feedback incorrect">Please select an answer!</div>';
            return;
        }
        
        gameData.totalAnswers++;
        const selectedBool = selected === 'true';
        
        if (selectedBool === q.answer) {
            correct++;
            gameData.correctAnswers++;
            gameData.streak++;
            gameData.points += 5;
            feedbackContainer.innerHTML = '<div class="feedback correct">‚úì Correct!</div>';
            card.querySelectorAll('.option-btn').forEach(btn => {
                if (btn.classList.contains('selected')) {
                    btn.classList.add('correct');
                }
            });
        } else {
            gameData.streak = 0;
            const correctAnswer = q.answer ? 'True' : 'False';
            feedbackContainer.innerHTML = `<div class="feedback incorrect">‚úó Incorrect. The correct answer is: <strong>${correctAnswer}</strong></div>`;
            card.querySelectorAll('.option-btn').forEach(btn => {
                if (btn.classList.contains('selected')) {
                    btn.classList.add('incorrect');
                }
                if ((btn.textContent === 'True' && q.answer) || (btn.textContent === 'False' && !q.answer)) {
                    btn.classList.add('correct');
                }
            });
        }
    });
    
    updateGameStats();
}

function loadMultipleChoiceQuiz() {
    const container = document.getElementById('mcQuizContainer');
    container.innerHTML = '';
    
    multipleChoiceQuiz.forEach((q, index) => {
        const questionCard = document.createElement('div');
        questionCard.className = 'question-card';
        questionCard.dataset.index = index;
        
        questionCard.innerHTML = `
            <div class="question-text">${index + 1}. ${q.question}</div>
            <div class="options-grid">
                ${q.options.map(opt => `
                    <button class="option-btn" onclick="selectMCOption(${index}, '${opt.replace(/'/g, "\\'")}', this)">${opt}</button>
                `).join('')}
            </div>
            <div class="feedback-container"></div>
        `;
        
        container.appendChild(questionCard);
    });
}

function selectMCOption(questionIndex, selectedAnswer, button) {
    const card = button.closest('.question-card');
    card.querySelectorAll('.option-btn').forEach(btn => {
        btn.classList.remove('selected');
    });
    button.classList.add('selected');
    card.dataset.selected = selectedAnswer;
    
    // Clear previous feedback
    const feedbackContainer = card.querySelector('.feedback-container');
    feedbackContainer.innerHTML = '';
}

function checkAllMCAnswers() {
    let correct = 0;
    multipleChoiceQuiz.forEach((q, index) => {
        const card = document.querySelector(`#mcQuizContainer .question-card[data-index="${index}"]`);
        const selected = card.dataset.selected;
        const feedbackContainer = card.querySelector('.feedback-container');
        
        if (!selected) {
            feedbackContainer.innerHTML = '<div class="feedback incorrect">Please select an answer!</div>';
            return;
        }
        
        gameData.totalAnswers++;
        
        if (selected === q.answer) {
            correct++;
            gameData.correctAnswers++;
            gameData.streak++;
            gameData.points += 5;
            feedbackContainer.innerHTML = '<div class="feedback correct">‚úì Excellent! That\'s correct!</div>';
            card.querySelectorAll('.option-btn').forEach(btn => {
                if (btn.textContent === q.answer) {
                    btn.classList.add('correct');
                }
            });
        } else {
            gameData.streak = 0;
            feedbackContainer.innerHTML = `<div class="feedback incorrect">‚úó Incorrect. The correct answer is: <strong>${q.answer}</strong></div>`;
            card.querySelectorAll('.option-btn').forEach(btn => {
                if (btn.classList.contains('selected')) {
                    btn.classList.add('incorrect');
                }
                if (btn.textContent === q.answer) {
                    btn.classList.add('correct');
                }
            });
        }
    });
    
    updateGameStats();
}

function showFinalResults() {
    const accuracy = gameData.totalAnswers > 0 
        ? Math.round((gameData.correctAnswers / gameData.totalAnswers) * 100) 
        : 0;
    
    let grade = '';
    let message = '';
    let emoji = '';
    
    if (accuracy >= 90) {
        grade = 'A+';
        message = 'Outstanding! You\'ve mastered Layered Architecture!';
        emoji = 'üèÜ';
    } else if (accuracy >= 80) {
        grade = 'A';
        message = 'Excellent work! You have a strong blueprint!';
        emoji = 'üåü';
    } else if (accuracy >= 70) {
        grade = 'B';
        message = 'Good job! Keep building on this knowledge!';
        emoji = 'üëç';
    } else if (accuracy >= 60) {
        grade = 'C';
        message = 'You\'re getting there! Review the material and try again!';
        emoji = 'üìö';
    } else {
        grade = 'D';
        message = 'Keep studying! Go back and review the content!';
        emoji = 'üí™';
    }
    
    const modal = document.createElement('div');
    modal.style.cssText = `
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0,0,0,0.8);
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 10000;
        animation: fadeIn 0.3s;
    `;
    
    modal.innerHTML = `
        <div style="background: white; padding: 40px; border-radius: 20px; text-align: center; max-width: 500px; animation: slideUp 0.3s;">
            <div style="font-size: 5em; margin-bottom: 20px;">${emoji}</div>
            <h2 style="color: #667eea; margin-bottom: 20px;">Final Results</h2>
            <div style="font-size: 4em; font-weight: bold; color: #667eea; margin: 20px 0;">${grade}</div>
            <p style="font-size: 1.2em; 
        margin-bottom: 30px; 
        color: #333;
    ">${message}</p>
            <div style="font-size: 1.1em; color: #555; margin-bottom: 30px;">
                <p><strong>Total Points:</strong> ${gameData.points} üèÜ</p>
                <p><strong>Final Accuracy:</strong> ${accuracy}% üéØ</p>
                <p><strong>Content Completed:</strong> ${gameData.completedSections.size} / ${gameData.totalSections}</p>
            </div>
            <button 
                class="action-btn primary" 
                onclick="this.closest('div[style*=\'position: fixed\']').remove()"
            >Close</button>
        </div>
    `;
    
    // Add animations and append to body
    const style = document.createElement('style');
    style.textContent = `
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes slideUp { from { transform: translateY(50px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
    `;
    
    document.head.appendChild(style);
    document.body.appendChild(modal);
    
    // Clean up style tag
    setTimeout(() => {
        style.remove();
    }, 300);
}


// ==================== INITIALIZATION ====================
document.addEventListener('DOMContentLoaded', () => {
    // Setup tab navigation
    const tabs = document.querySelectorAll('.tab-btn');
    tabs.forEach(tab => {
        tab.addEventListener('click', () => navigateToTab(tab.dataset.tab));
    });

    // Setup glossary accordion
    document.querySelectorAll('.accordion-header').forEach(header => {
        header.addEventListener('click', () => {
            const content = header.nextElementSibling;
            header.classList.toggle('active');
            content.classList.toggle('active');
        });
    });

    // Load all quizzes on page load
    loadFillInTheBlankQuiz();
    loadTrueFalseQuiz();
    loadMultipleChoiceQuiz();
    
    // Initialize the game stats display
    updateGameStats();
});
</script>
</body>
</html>


